<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                         "http://www.docbook.org/xml/4.4/docbookx.dtd">
<article>
  <title>Virtualbox OSE for Debian</title>
  <section>
    <title>Different versions</title>
    <para>
      The Open Source Edition of VirtualBox contains most but not all
      features of the closed-source VirtualBox product that is
      distributed under different terms and available from the
      <ulink url="http://virtualbox.org/wiki/Downloads">
	Virtualbox homepage</ulink>.
    </para>
    <itemizedlist>
      <listitem>
        <para>
          Remote Display Protocol (RDP) Server
        </para>
        <para>
          This component implements a complete RDP server on top of
          the virtual hardware and allows users to connect to a
          virtual machine remotely using any RDP compatible client.
        </para>
      </listitem>
      <listitem>
        <para>USB support</para>
        <para>
          VirtualBox implements a virtual USB controller and supports
          passing through USB 1.1 and USB 2.0 devices to virtual
          machines.
        </para>
      </listitem>
      <listitem>
        <para>USB over RDP</para>
        <para>
          This is a combination of the RDP server and USB support
          allowing users to make USB devices available to virtual
          machines running remotely.
        </para>
      </listitem>
      <listitem>
        <para>iSCSI initiator</para>
        <para>
          VirtualBox contains a builtin iSCSI initiator making it
          possible to use iSCSI targets as virtual disks without the
          guest requiring support for iSCSI.
        </para>
      </listitem>
      <listitem>
        <para>Emulation for Intel e1000 network devices</para>
      </listitem>
      <!-- FIXME web services? What else? -->
    </itemizedlist>
  </section>
  <section>
    <title>How to provide networking to virtual machines</title>
    <section>
      <title>Mechanism</title>
      <para>
	VirtualBox can use three alternative mechanisms to provide
	Ethernet networking to its virtual machines:b
      </para>
      <section>
	<title>NAT</title>
	<para>
	  This is the easiest to use type of setup: The virtual
	  ethernet interface is connected to a virtual NAT router
	  including a DHCP server that is implemented within
	  the VirtualBox host software.
	</para>
	<para>
	  This is the default mode. It usually does not require
	  any extra configuration on the host.
	</para>
      </section>
      <section>
	<title>Internal network</title>
	<para>
	  In this mode, there is only connectivity within an
	  emulated network shared between two or more virtual
	  machines running in the same VirtualBox instance.
	</para>
      </section>
      <section>
	<title>Host interface</title>
	<para>
	  The virtual ethernet interface is connected to a
	  <emphasis>TAP</emphasis> device on the host. Adding this
	  <emphasis>TAP</emphasis> device to a bridging or IP routing
	  setup is the responsibility of the user.
	</para>
      </section>
    </section>
    <section>
      <title>Host interface configuration</title>
      <para>
	By attaching the VM's interface to "Host Interface" and
	creating a corresponding <emphasis>TAP</emphasis> interface
	the VM can be made visible on the local network.
      </para>
      <section>
	<title>Using <command>VBoxAddIF</command></title>
	<para>
	  The VirtualBox includes a helper script,
	  <command>VBoxAddIF</command> that sets up a
	  <emphasis>TAP</emphasis> device for a specified user and
	  optionally connects it to a bridge. This needs to be done
	  only once for a particular user. Settings for all defined
	  interfaces are stored in the file
	  <filename>/etc/vbox/interfaces</filename> and created by the
	  <filename>/etc/init.d/virtualbox-ose</filename> init script
	  whenever the host system is booted.
	  <figure>
	    <title>Sample commandlines for permanently setting up
	      <emphasis>TAP</emphasis> interface</title>
	    <cmdsynopsis>
	      <command># VBoxAddIF vbox0 luser1 br0</command>
	      <command># VBoxAddIF vbox1 luser2</command>
	    </cmdsynopsis>
	  </figure>
	  These interfaces can be removed using the
	  <command>VBoxDeleteIF</command> command.
	</para>
	<para>
	  You can of course create multiple interfaces per user, but
	  interfaces must have unique names.
	</para>
      </section>
      <section><title><command>ifup</command> /
	  <command>ifdown</command></title>
	<para>
	  Starting with version 1.5.6-3, the virtualbox-ose package
	  contains helper scripts that allow <emphasis>TAP</emphasis>
	  interfaces for host-based networking to be configured from
	  <filename>/etc/network/interfaces</filename>. The names for
	  such interfaces must start with <code>vbox</code>. The
	  owner <!-- and group --> for this interface can be set using
	  the <code>virtualbox-user</code> <!-- and
	  <code>virtualbox-group</code>keywords respectively.-->
	  keyword.
	  <figure>
	    <title>Configuration of <emphasis>TAP</emphasis> interface
	    for VirtualBox</title>
	    <para>
	      <programlisting>
iface vbox0 inet static
	address 192.168.3.1
	netmask 255.255.255.0
	virtualbox-user luser
<!-- #virtualbox-group vboxusers -->
	      </programlisting>
	    </para>
	  </figure>
	</para>
	<!-- FIXME: Bridging -->
      </section>
    </section>
  </section>
  <section>
    <title>Incompatibilities with previous versions</title>
    <para>
      Unfortunately, the configuration files between version version
      1.4.0-svn4130 and 1.5.0 the configuration files are
      incompatible. In order to fix this issue please delete the
      complete <command><![CDATA[<Uart>]]></command> section in any
      <filename>~/.VirtualBox/Machines/NAME/NAME.xml</filename> files.
    </para>
  </section>
  <section>
    <title>See also</title>
    <para>
      Additional and updated information may be found on
      <itemizedlist>
	<listitem>
	  <para>
	    the
	    <ulink url="http://virtualbox.org/wiki/End-user_documentation">
	      End-user documentation</ulink> section of the official
	    VirtualBox site.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    the
	    <ulink url="http://wiki.debian.org/VirtualBox">VirtualBox</ulink>
	    page in the Debian Wiki.
	  </para>
	</listitem>
      </itemizedlist>
    </para>
  </section>
</article>
