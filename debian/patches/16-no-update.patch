Description: Disable "Check for Updates" action.
Bug-Ubuntu: https://bugs.launchpad.net/bugs/272212
Author: Daniel Hahler <ubuntu@thequod.de>, Felix Geyer <debfx-pkg@fobos.de>

diff a/src/VBox/Frontends/VirtualBox/src/net/UIUpdateManager.cpp b/src/VBox/Frontends/VirtualBox/src/net/UIUpdateManager.cpp
Index: virtualbox/src/VBox/Frontends/VirtualBox/src/net/UIUpdateManager.cpp
===================================================================
--- virtualbox.orig/src/VBox/Frontends/VirtualBox/src/net/UIUpdateManager.cpp
+++ virtualbox/src/VBox/Frontends/VirtualBox/src/net/UIUpdateManager.cpp
@@ -65,6 +65,8 @@
 
 void UIUpdateManager::sltForceCheck()
 {
+    return;
+
     /* Force call for new version check: */
     sltCheckIfUpdateIsNecessary(true);
 }
Index: virtualbox/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp
===================================================================
--- virtualbox.orig/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp
+++ virtualbox/src/VBox/Frontends/VirtualBox/src/settings/UISettingsDialogSpecific.cpp
@@ -540,6 +540,10 @@
 #endif /* !VBOX_WITH_NETFLT */
             break;
         }
+        case GLSettingsPage_Update:
+        {
+            return false;
+        }
         default:
             break;
     }
Index: virtualbox/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.cpp
===================================================================
--- virtualbox.orig/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.cpp
+++ virtualbox/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.cpp
@@ -438,7 +438,6 @@
 #ifdef VBOX_WITH_REGISTRATION
     m_pool[UIActionIndex_Simple_Register] = new PerformRegisterAction(this);
 #endif /* VBOX_WITH_REGISTRATION */
-    m_pool[UIActionIndex_Simple_Update] = new PerformUpdateAction(this);
     m_pool[UIActionIndex_Simple_About] = new ShowAboutAction(this);
 }
 
@@ -472,9 +471,6 @@
     m_pool[UIActionIndex_Simple_Update]->setVisible(false);
 #endif
 #if !(defined(Q_WS_MAC) && (QT_VERSION < 0x040700))
-    if (m_pool[UIActionIndex_Simple_Update])
-        delete m_pool[UIActionIndex_Simple_Update];
-    m_pool[UIActionIndex_Simple_Update] = new PerformUpdateAction(this);
     if (m_pool[UIActionIndex_Simple_About])
         delete m_pool[UIActionIndex_Simple_About];
     m_pool[UIActionIndex_Simple_About] = new ShowAboutAction(this);
Index: virtualbox/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.h
===================================================================
--- virtualbox.orig/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.h
+++ virtualbox/src/VBox/Frontends/VirtualBox/src/globals/UIActionPool.h
@@ -45,7 +45,6 @@
 #ifdef VBOX_WITH_REGISTRATION
     UIActionIndex_Simple_Register,
 #endif /* VBOX_WITH_REGISTRATION */
-    UIActionIndex_Simple_Update,
     UIActionIndex_Simple_About,
 
     /* Maximum index: */
Index: virtualbox/src/VBox/Frontends/VirtualBox/src/selector/VBoxSelectorWnd.cpp
===================================================================
--- virtualbox.orig/src/VBox/Frontends/VirtualBox/src/selector/VBoxSelectorWnd.cpp
+++ virtualbox/src/VBox/Frontends/VirtualBox/src/selector/VBoxSelectorWnd.cpp
@@ -1751,12 +1751,6 @@
     pMenu->addAction(gActionPool->action(UIActionIndex_Simple_Register));
 #endif /* VBOX_WITH_REGISTRATION */
 
-    pMenu->addAction(gActionPool->action(UIActionIndex_Simple_Update));
-
-#ifndef Q_WS_MAC
-    pMenu->addSeparator();
-#endif /* !Q_WS_MAC */
-
     pMenu->addAction(gActionPool->action(UIActionIndex_Simple_About));
 
     /* Configure connections: */
@@ -1772,8 +1766,6 @@
     VBoxGlobal::connect(gEDataEvents, SIGNAL(sigCanShowRegistrationDlg(bool)),
                         gActionPool->action(UIActionIndex_Simple_Register), SLOT(setEnabled(bool)));
 #endif /* VBOX_WITH_REGISTRATION */
-    VBoxGlobal::connect(gActionPool->action(UIActionIndex_Simple_Update), SIGNAL(triggered()),
-                        gUpdateManager, SLOT(sltForceCheck()));
     VBoxGlobal::connect(gActionPool->action(UIActionIndex_Simple_About), SIGNAL(triggered()),
                         &msgCenter(), SLOT(sltShowHelpAboutDialog()));
 }
